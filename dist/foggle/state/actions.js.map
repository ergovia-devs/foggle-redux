{"version":3,"sources":["../../../src/foggle/state/actions.js"],"names":["updateFeatures","type","UPDATE_ENABLED_FEATURES","enabledFeatures","json","checkFeatures","url","app","headers","fetch","mode","then","response","ok","dispatch","catch","console","error"],"mappings":";;;;;;;AAoBA;;AAEA,IAAMA,iBAAiB,SAAjBA,cAAiB;AAAA,SAAS;AAC5BC,UAAMC,8BADsB;AAE5BC,qBAAiBC,KAAKD;AAFM,GAAT;AAAA,CAAvB;;AAKA;;;;;;;;;AA3BA;;;;;;;;;;;;;;;;;;;;AAoCO,IAAME,wCAAgB,SAAhBA,aAAgB,CAACC,GAAD,EAAMC,GAAN,EAAWC,OAAX;AAAA,SAAuB,oBAAY;;AAE5DC,eAASH,GAAT,GAAeC,GAAf,EAAsB,EAAEC,gBAAF,EAAWE,MAAM,MAAjB,EAAtB,EACKC,IADL,CACU;AAAA,aAAYC,SAASC,EAAT,GAAcD,SAASR,IAAT,EAAd,GAAgC,EAAED,iBAAiB,EAAnB,EAA5C;AAAA,KADV,EAEKQ,IAFL,CAEU;AAAA,aAAQG,SAASd,eAAeI,IAAf,CAAT,CAAR;AAAA,KAFV,EAGKW,KAHL,CAGWC,QAAQC,KAHnB;AAKH,GAP4B;AAAA,CAAtB","file":"actions.js","sourceRoot":"src","sourcesContent":["/**\n * This file is part of foggle-redux.\n *\n * foggle-redux. is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * foggle-redux is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with foggle-redux.  If not, see <http://www.gnu.org/licenses/>.\n *\n * actions.js 05.07.18\n *\n * (c) Copyright 2018 ergovia GmbH\n */\nimport {UPDATE_ENABLED_FEATURES} from './types';\n\nconst updateFeatures = json => ({\n    type: UPDATE_ENABLED_FEATURES,\n    enabledFeatures: json.enabledFeatures\n});\n\n/**\n * Asks the server for new features\n *\n * @param {string} url the url to fetch from\n * @param {string} app the name of the app to identify features\n * @param {object} headers additional headers for the fetch request\n *\n * @return {Promise} the result of the fetch-request as promise\n */\nexport const checkFeatures = (url, app, headers) => dispatch => {\n\n    fetch(`${url}${app}`, { headers, mode: 'cors' })\n        .then(response => response.ok ? response.json() : { enabledFeatures: [] })\n        .then(json => dispatch(updateFeatures(json)))\n        .catch(console.error);\n\n};\n"]}